<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lab8-01-index.html - 数字图书展销平台</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="21.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <!-- 登录模态框 -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-circle"></i> 用户登录</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="username"><i class="fas fa-envelope"></i> 邮箱/手机号</label>
                        <input type="text" id="username" placeholder="请输入邮箱或手机号" required>
                        <div class="tip-text" id="usernameTip"></div>
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="fas fa-lock"></i> 密码</label>
                        <input type="password" id="password" placeholder="请输入密码（6-16位）" required>
                        <div class="tip-text" id="passwordTip"></div>
                        <div class="password-strength">
                            <div class="strength-bar" id="strength1"></div>
                            <div class="strength-bar" id="strength2"></div>
                            <div class="strength-bar" id="strength3"></div>
                        </div>
                    </div>
                    <div class="form-group remember-me">
                        <input type="checkbox" id="remember">
                        <label for="remember"><i class="fas fa-check-circle"></i> 记住我</label>
                    </div>
                    <button type="button" class="login-btn" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i> 登录
                    </button>
                    <div class="register-link">
                        还没有账号? <a href="re.html"><i class="fas fa-user-plus"></i> 立即注册</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 头部导航 -->
    <header class="fixed-header">
        <div class="logo">
            <i class="fas fa-book-reader"></i> 数字图书展销平台
        </div>
        
        <!-- 实时时间显示 (迭代6) -->
        <div class="real-time-clock" id="realTimeClock">
            <div class="date-display">
                <i class="far fa-calendar-alt"></i>
                <span id="currentDate">2025年01月01日 星期一</span>
            </div>
            <div class="time-display">
                <i class="far fa-clock"></i>
                <span id="currentTime">00:00:00</span>
            </div>
        </div>
        
        <!-- 智能搜索框 (迭代5) -->
        <div class="search-box">
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="搜索图书（书名/作者/分类）">
                <div class="search-result" id="searchResult"></div>
            </div>
        </div>
        
        <nav class="main-nav">
            <ul>
                <li class="dropdown">
                    <a href="#" class="dropdown-btn"><i class="fas fa-th-large"></i> 图书分类</a>
                    <div class="dropdown-menu">
                        <a href="#"><i class="fas fa-book"></i> 文学小说</a>
                        <a href="#"><i class="fas fa-laptop-code"></i> 计算机科技</a>
                        <a href="#"><i class="fas fa-landmark"></i> 历史人文</a>
                        <a href="#"><i class="fas fa-palette"></i> 艺术设计</a>
                        <a href="#"><i class="fas fa-apple-alt"></i> 生活百科</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-btn"><i class="fas fa-filter"></i> 价格筛选</a>
                    <div class="dropdown-menu">
                        <a href="#">0-50元</a>
                        <a href="#">50-100元</a>
                        <a href="#">100元以上</a>
                    </div>
                </li>
                <li><a href="#promotions"><i class="fas fa-tags"></i> 促销活动</a></li>
                <li><a href="#about"><i class="fas fa-info-circle"></i> 关于我们</a></li>
                <li>
                    <a href="#" class="login-link" id="showLogin">
                        <i class="fas fa-sign-in-alt"></i> 登录/注册
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <!-- 主体内容 -->
    <div class="container">
        <div class="main-layout">
            <!-- 左侧分类栏 -->
            <aside class="left-bar">
                <div class="sidebar-section">
                    <h3><i class="fas fa-compass"></i> 图书分类导航</h3>
                    <ul class="category-list">
                        <li><a href="#"><i class="fas fa-book"></i> 文学小说 <span class="count">128</span></a></li>
                        <li><a href="#"><i class="fas fa-laptop-code"></i> 计算机科技 <span class="count">56</span></a></li>
                        <li><a href="#"><i class="fas fa-landmark"></i> 历史人文 <span class="count">42</span></a></li>
                        <li><a href="#"><i class="fas fa-palette"></i> 艺术设计 <span class="count">35</span></a></li>
                        <li><a href="#"><i class="fas fa-apple-alt"></i> 生活百科 <span class="count">78</span></a></li>
                    </ul>
                </div>
                
                <!-- 图书筛选功能 (迭代6) -->
                <div class="sidebar-section filter-section">
                    <h3><i class="fas fa-sliders-h"></i> 筛选选项</h3>
                    <div class="filter-group">
                        <label class="filter-label">
                            <input type="checkbox" id="inStockOnly">
                            <span class="checkmark"></span>
                            <i class="fas fa-check-circle"></i> 只看有货
                        </label>
                    </div>
                    <div class="sort-buttons">
                        <button class="sort-btn" data-sort="price-asc">
                            <i class="fas fa-sort-amount-up"></i> 价格升序
                        </button>
                        <button class="sort-btn" data-sort="price-desc">
                            <i class="fas fa-sort-amount-down"></i> 价格降序
                        </button>
                        <button class="sort-btn" data-sort="rating">
                            <i class="fas fa-star"></i> 评分排序
                        </button>
                    </div>
                </div>
                
                <!-- 快速链接 -->
                <div class="sidebar-section quick-links">
                    <h3><i class="fas fa-link"></i> 快速链接</h3>
                    <a href="#" class="quick-link"><i class="fas fa-fire"></i> 热销榜单</a>
                    <a href="#" class="quick-link"><i class="fas fa-gift"></i> 限时特惠</a>
                    <a href="#" class="quick-link"><i class="fas fa-bookmark"></i> 收藏好书</a>
                </div>
            </aside>

            <!-- 中间主内容区 -->
            <main class="middle-content">
                <!-- 轮播图 -->
                <section class="carousel">
                    <div class="carousel-wrapper">
                        <div class="carousel-item">
                            <img src="https://picsum.photos/id/24/1200/420" alt="图书展销banner1">
                            <div class="carousel-caption">
                                <h3>冬日书香季</h3>
                                <p>全场图书8折起，满100减20</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="https://picsum.photos/id/20/1200/420" alt="图书展销banner2">
                            <div class="carousel-caption">
                                <h3>科技图书节</h3>
                                <p>计算机图书专享优惠，送定制礼品</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="https://picsum.photos/id/42/1200/420" alt="图书展销banner3">
                            <div class="carousel-caption">
                                <h3>经典文学专场</h3>
                                <p>中外名著特价优惠，收藏正版好书</p>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-dots">
                        <span class="dot active"></span>
                        <span class="dot"></span>
                        <span class="dot"></span>
                    </div>
                </section>

                <!-- 限时抢购倒计时 (迭代6) -->
                <section class="countdown-section">
                    <div class="countdown-header">
                        <h2 class="section-title">
                            <i class="fas fa-bolt"></i> 限时抢购
                            <span class="badge">火热进行中</span>
                        </h2>
                        <div class="countdown-label">
                            <i class="far fa-clock"></i> 距离活动结束仅剩
                        </div>
                    </div>
                    <div class="countdown-timer" id="countdownTimer">
                        <div class="countdown-unit">
                            <span class="countdown-value" id="days">03</span>
                            <span class="countdown-label">天</span>
                        </div>
                        <div class="countdown-separator">:</div>
                        <div class="countdown-unit">
                            <span class="countdown-value" id="hours">12</span>
                            <span class="countdown-label">时</span>
                        </div>
                        <div class="countdown-separator">:</div>
                        <div class="countdown-unit">
                            <span class="countdown-value" id="minutes">45</span>
                            <span class="countdown-label">分</span>
                        </div>
                        <div class="countdown-separator">:</div>
                        <div class="countdown-unit">
                            <span class="countdown-value" id="seconds">30</span>
                            <span class="countdown-label">秒</span>
                        </div>
                    </div>
                    <div class="countdown-products">
                        <div class="countdown-product">
                            <div class="product-badge">8折</div>
                            <img src="https://picsum.photos/id/24/120/160" alt="限时图书1">
                            <div class="product-info">
                                <h4>《病隙碎笔》</h4>
                                <p class="author">史铁生</p>
                                <div class="price">
                                    <span class="old-price">¥45.00</span>
                                    <span class="new-price">¥36.00</span>
                                </div>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                        <div class="countdown-product">
                            <div class="product-badge">8折</div>
                            <img src="https://picsum.photos/id/20/120/160" alt="限时图书2">
                            <div class="product-info">
                                <h4>《我与地坛》</h4>
                                <p class="author">史铁生</p>
                                <div class="price">
                                    <span class="old-price">¥39.80</span>
                                    <span class="new-price">¥31.84</span>
                                </div>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                        <div class="countdown-product">
                            <div class="product-badge">8折</div>
                            <img src="https://picsum.photos/id/42/120/160" alt="限时图书3">
                            <div class="product-info">
                                <h4>《雪国》</h4>
                                <p class="author">川端康成</p>
                                <div class="price">
                                    <span class="old-price">¥42.00</span>
                                    <span class="new-price">¥33.60</span>
                                </div>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 随机图书推荐模块 (迭代6) -->
                <section class="recommendation-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-random"></i> 随机图书推荐
                            <span class="subtitle">发现未知的好书</span>
                        </h2>
                        <button class="refresh-btn" id="refreshRecommendations">
                            <i class="fas fa-sync-alt"></i> 换一批
                            <span class="refresh-count" id="refreshCount">0</span>
                        </button>
                    </div>
                    <div class="recommendation-list" id="recommendationList">
                        <!-- 随机图书将通过JS动态生成 -->
                    </div>
                </section>

                <!-- 3D翻转图书卡片 (迭代4) -->
                <section class="card-3d-section">
                    <h2 class="section-title">
                        <i class="fas fa-retweet"></i> 3D翻牌图书推荐
                        <span class="hint">（鼠标悬停翻转查看详情）</span>
                    </h2>
                    <div class="card-3d-group">
                        <!-- 图书1 -->
                        <div class="book-card-3d">
                            <div class="card-inner">
                                <div class="card-front">
                                    <div class="book-cover">
                                        <img src="https://picsum.photos/id/24/220/320" alt="病隙碎笔">
                                        <div class="book-badge">热销</div>
                                    </div>
                                    <div class="book-preview">
                                        <h4>《病隙碎笔》</h4>
                                        <p class="author">史铁生</p>
                                        <div class="rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-back">
                                    <h4>《病隙碎笔》</h4>
                                    <p class="author">史铁生 著</p>
                                    <div class="price-section">
                                        <div class="price">¥45.00</div>
                                        <div class="discount">8折</div>
                                    </div>
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <span class="rating-text">5.0</span>
                                    </div>
                                    <p class="desc">史铁生的散文代表作，在病痛的间隙中思考人生、命运、信仰，文字质朴而深刻，充满了生命的力量和哲学的思考。</p>
                                    <div class="action-buttons">
                                        <button class="btn-add-cart">
                                            <i class="fas fa-shopping-cart"></i> 加入购物车
                                        </button>
                                        <button class="btn-buy-now">
                                            <i class="fas fa-bolt"></i> 立即购买
                                        </button>
                                    </div>
                                    <div class="stock-status" data-instock="true">
                                        <i class="fas fa-check-circle"></i> 有货
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 图书2 -->
                        <div class="book-card-3d">
                            <div class="card-inner">
                                <div class="card-front">
                                    <div class="book-cover">
                                        <img src="https://picsum.photos/id/20/220/320" alt="我与地坛">
                                        <div class="book-badge">经典</div>
                                    </div>
                                    <div class="book-preview">
                                        <h4>《我与地坛》</h4>
                                        <p class="author">史铁生</p>
                                        <div class="rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-back">
                                    <h4>《我与地坛》</h4>
                                    <p class="author">史铁生 著</p>
                                    <div class="price-section">
                                        <div class="price">¥39.80</div>
                                        <div class="discount">8折</div>
                                    </div>
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <span class="rating-text">5.0</span>
                                    </div>
                                    <p class="desc">史铁生的生命独白，记录在地坛的所思所感，探讨生死与救赎，文字真挚动人，展现了对生命意义的深刻思考。</p>
                                    <div class="action-buttons">
                                        <button class="btn-add-cart">
                                            <i class="fas fa-shopping-cart"></i> 加入购物车
                                        </button>
                                        <button class="btn-buy-now">
                                            <i class="fas fa-bolt"></i> 立即购买
                                        </button>
                                    </div>
                                    <div class="stock-status" data-instock="true">
                                        <i class="fas fa-check-circle"></i> 有货
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 图书3 -->
                        <div class="book-card-3d">
                            <div class="card-inner">
                                <div class="card-front">
                                    <div class="book-cover">
                                        <img src="https://picsum.photos/id/42/220/320" alt="雪国">
                                        <div class="book-badge">文学</div>
                                    </div>
                                    <div class="book-preview">
                                        <h4>《雪国》</h4>
                                        <p class="author">川端康成</p>
                                        <div class="rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-back">
                                    <h4>《雪国》</h4>
                                    <p class="author">川端康成 著</p>
                                    <div class="price-section">
                                        <div class="price">¥42.00</div>
                                        <div class="discount">8折</div>
                                    </div>
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <span class="rating-text">4.5</span>
                                    </div>
                                    <p class="desc">川端康成诺贝尔文学奖作品，以唯美笔触描绘雪国的清冷，展现日式美学极致，被誉为日本文学的巅峰之作。</p>
                                    <div class="action-buttons">
                                        <button class="btn-add-cart">
                                            <i class="fas fa-shopping-cart"></i> 加入购物车
                                        </button>
                                        <button class="btn-buy-now">
                                            <i class="fas fa-bolt"></i> 立即购买
                                        </button>
                                    </div>
                                    <div class="stock-status" data-instock="true">
                                        <i class="fas fa-check-circle"></i> 有货
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 图书4 -->
                        <div class="book-card-3d">
                            <div class="card-inner">
                                <div class="card-front">
                                    <div class="book-cover">
                                        <img src="https://picsum.photos/id/18/220/320" alt="AI时代与人类未来">
                                        <div class="book-badge">新品</div>
                                    </div>
                                    <div class="book-preview">
                                        <h4>《AI时代与人类未来》</h4>
                                        <p class="author">李开复</p>
                                        <div class="rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-back">
                                    <h4>《AI时代与人类未来》</h4>
                                    <p class="author">李开复 著</p>
                                    <div class="price-section">
                                        <div class="price">¥69.00</div>
                                        <div class="discount">新品</div>
                                    </div>
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <span class="rating-text">4.5</span>
                                    </div>
                                    <p class="desc">深度解析AI对人类社会的影响，预测科技与人文的融合方向，兼具专业与可读，为未来社会发展提供思考。</p>
                                    <div class="action-buttons">
                                        <button class="btn-add-cart">
                                            <i class="fas fa-shopping-cart"></i> 加入购物车
                                        </button>
                                        <button class="btn-buy-now">
                                            <i class="fas fa-bolt"></i> 立即购买
                                        </button>
                                    </div>
                                    <div class="stock-status" data-instock="false">
                                        <i class="fas fa-clock"></i> 预售中
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 3D环形图书展示 (迭代4) -->
                <section class="ring-3d-section">
                    <h2 class="section-title">
                        <i class="fas fa-circle-notch"></i> 3D环形热门图书
                        <span class="hint">（自动旋转，鼠标悬停暂停）</span>
                    </h2>
                    <div class="ring-container">
                        <div class="ring">
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/1/120/180" alt="图书1">
                                <div class="ring-overlay">
                                    <h5>《百年孤独》</h5>
                                    <p>加西亚·马尔克斯</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/2/120/180" alt="图书2">
                                <div class="ring-overlay">
                                    <h5>《活着》</h5>
                                    <p>余华</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/3/120/180" alt="图书3">
                                <div class="ring-overlay">
                                    <h5>《三体》</h5>
                                    <p>刘慈欣</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/4/120/180" alt="图书4">
                                <div class="ring-overlay">
                                    <h5>《小王子》</h5>
                                    <p>安托万·德·圣埃克苏佩里</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/5/120/180" alt="图书5">
                                <div class="ring-overlay">
                                    <h5>《追风筝的人》</h5>
                                    <p>卡勒德·胡赛尼</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/6/120/180" alt="图书6">
                                <div class="ring-overlay">
                                    <h5>《解忧杂货店》</h5>
                                    <p>东野圭吾</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/7/120/180" alt="图书7">
                                <div class="ring-overlay">
                                    <h5>《白夜行》</h5>
                                    <p>东野圭吾</p>
                                </div>
                            </div>
                            <div class="ring-item">
                                <img src="https://picsum.photos/id/8/120/180" alt="图书8">
                                <div class="ring-overlay">
                                    <h5>《挪威的森林》</h5>
                                    <p>村上春树</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ring-controls">
                        <button class="ring-btn" id="ringPause">
                            <i class="fas fa-pause"></i> 暂停
                        </button>
                        <button class="ring-btn" id="ringResume">
                            <i class="fas fa-play"></i> 继续
                        </button>
                        <button class="ring-btn" id="ringReverse">
                            <i class="fas fa-retweet"></i> 反向
                        </button>
                    </div>
                </section>

                <!-- 新书上市 -->
                <section class="new-book-section">
                    <h2 class="section-title">
                        <i class="fas fa-book-open"></i> 新书上市
                        <span class="subtitle">最新上架图书推荐</span>
                    </h2>
                    <table class="new-book-table" id="bookTable">
                        <thead>
                            <tr>
                                <th>新书名称</th>
                                <th>作者</th>
                                <th>分类</th>
                                <th>原价</th>
                                <th>现价</th>
                                <th>库存状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="bookTableBody">
                            <tr data-id="1" data-instock="true">
                                <td>《AI时代与人类未来》</td>
                                <td>李开复</td>
                                <td><span class="category-badge tech">科技</span></td>
                                <td class="old-price">¥79.00</td>
                                <td class="new-price">¥69.00</td>
                                <td><span class="stock-badge in-stock">有货</span></td>
                                <td>
                                    <button class="table-btn add-cart" data-id="1">
                                        <i class="fas fa-cart-plus"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr data-id="2" data-instock="true">
                                <td>《长安的荔枝》</td>
                                <td>马伯庸</td>
                                <td><span class="category-badge fiction">小说</span></td>
                                <td class="old-price">¥42.00</td>
                                <td class="new-price">¥35.00</td>
                                <td><span class="stock-badge in-stock">有货</span></td>
                                <td>
                                    <button class="table-btn add-cart" data-id="2">
                                        <i class="fas fa-cart-plus"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr data-id="3" data-instock="false">
                                <td>《人类简史》（修订版）</td>
                                <td>尤瓦尔·赫拉利</td>
                                <td><span class="category-badge humanities">人文</span></td>
                                <td class="old-price">¥65.00</td>
                                <td class="new-price">¥55.00</td>
                                <td><span class="stock-badge out-stock">缺货</span></td>
                                <td>
                                    <button class="table-btn disabled" disabled>
                                        <i class="fas fa-clock"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- 促销横幅 -->
                <section class="banner" id="promotions">
                    <div class="banner-content">
                        <div class="banner-text">
                            <h3><i class="fas fa-gift"></i> 数字图书展销 · 全场8折起</h3>
                            <p>活动时间：11月1日-11月11日 | 满100减20，满200减50，上不封顶</p>
                        </div>
                        <div class="banner-actions">
                            <button class="banner-btn">
                                <i class="fas fa-shopping-bag"></i> 立即抢购
                            </button>
                            <button class="banner-btn outline">
                                <i class="fas fa-info-circle"></i> 查看详情
                            </button>
                        </div>
                    </div>
                    <div class="banner-decoration">
                        <div class="decoration-item">🔥</div>
                        <div class="decoration-item">🎉</div>
                        <div class="decoration-item">📚</div>
                    </div>
                </section>
            </main>

            <!-- 右侧边栏（促销信息） -->
            <aside class="right-bar">
                <div class="promo-card">
                    <div class="promo-header">
                        <h3><i class="fas fa-bolt"></i> 限时促销</h3>
                        <div class="promo-timer">
                            <i class="far fa-clock"></i>
                            <span id="promoCountdown">02:15:30</span>
                        </div>
                    </div>
                    <div class="promo-item">
                        <div class="promo-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="promo-content">
                            <div class="promo-title">全场图书满减</div>
                            <div class="promo-desc">
                                <p><i class="fas fa-check-circle"></i> 满100减20</p>
                                <p><i class="fas fa-check-circle"></i> 满200减50</p>
                                <p><i class="fas fa-calendar-alt"></i> 活动时间：11.1-11.11</p>
                            </div>
                        </div>
                    </div>
                    <div class="promo-item">
                        <div class="promo-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="promo-content">
                            <div class="promo-title">科技类图书赠品</div>
                            <div class="promo-desc">
                                <p><i class="fas fa-star"></i> 购任意科技类图书</p>
                                <p><i class="fas fa-star"></i> 送定制笔记本1本</p>
                                <p><i class="fas fa-exclamation-circle"></i> 数量有限，先到先得</p>
                            </div>
                        </div>
                    </div>
                    <div class="promo-mask">
                        <div class="mask-text">限时</div>
                        <div class="mask-text">特惠</div>
                    </div>
                </div>

                <div class="stats-card" id="about">
                    <div class="stats-header">
                        <h3><i class="fas fa-chart-line"></i> 平台数据</h3>
                    </div>
                    <div class="stats-content">
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="bookCount">10,000+</div>
                                <div class="stat-label">图书资源</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="userCount">50,000+</div>
                                <div class="stat-label">注册用户</div>
                            </div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="stat-info">
                                <div class="stat-number" id="publisherCount">500+</div>
                                <div class="stat-label">合作出版社</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="news-card">
                    <div class="news-header">
                        <h3><i class="far fa-newspaper"></i> 最新动态</h3>
                    </div>
                    <div class="news-list">
                        <div class="news-item">
                            <div class="news-date">11月1日</div>
                            <div class="news-title">冬季图书展销会开幕</div>
                        </div>
                        <div class="news-item">
                            <div class="news-date">10月28日</div>
                            <div class="news-title">新增电子书阅读功能</div>
                        </div>
                        <div class="news-item">
                            <div class="news-date">10月15日</div>
                            <div class="news-title">与知名出版社达成合作</div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- 3D页脚 (迭代4) -->
    <footer>
        <div class="footer-wave"></div>
        <div class="footer-container">
            <div class="footer-main">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-book-reader"></i> 数字图书展销平台
                    </div>
                    <p class="footer-description">
                        致力于提供优质的图书资源，涵盖文学、科技、人文、艺术等多个领域，
                        打造全方位的数字阅读体验。
                    </p>
                    <div class="footer-social">
                        <a href="#" class="social-link">
                            <i class="fab fa-weixin"></i>
                            <span class="social-tooltip">微信公众号</span>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-weibo"></i>
                            <span class="social-tooltip">微博</span>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-qq"></i>
                            <span class="social-tooltip">QQ</span>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-github"></i>
                            <span class="social-tooltip">GitHub</span>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>快速链接</h4>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> 关于我们</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> 联系我们</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> 隐私政策</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> 用户协议</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>帮助中心</h4>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-question-circle"></i> 常见问题</a></li>
                        <li><a href="#"><i class="fas fa-shipping-fast"></i> 配送说明</a></li>
                        <li><a href="#"><i class="fas fa-exchange-alt"></i> 退换货政策</a></li>
                        <li><a href="#"><i class="fas fa-phone-alt"></i> 客服中心</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>联系我们</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> 北京市海淀区图书大厦</p>
                        <p><i class="fas fa-phone"></i> 400-123-4567</p>
                        <p><i class="fas fa-envelope"></i> support@ebookplatform.com</p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="copyright">
                    © 2025 数字图书展销平台 版权所有 | 京ICP备12345678号-1
                </div>
                <div class="footer-stats">
                    <span class="stat-item">
                        <i class="fas fa-eye"></i> 今日访问: <span id="todayVisits">1,234</span>
                    </span>
                    <span class="stat-item">
                        <i class="fas fa-users"></i> 在线用户: <span id="onlineUsers">56</span>
                    </span>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript 脚本 -->
    <script>
        // ==================== 图书数据 ====================
        const bookData = [
            // 文学类
            { id: 1, name: '病隙碎笔', author: '史铁生', price: 45, rating: 5, category: '文学', stock: true, 
              cover: 'https://picsum.photos/id/24/220/320', description: '史铁生的散文代表作，在病痛的间隙中思考人生、命运、信仰，文字质朴而深刻，充满了生命的力量和哲学的思考。' },
            { id: 2, name: '我与地坛', author: '史铁生', price: 39.8, rating: 5, category: '文学', stock: true,
              cover: 'https://picsum.photos/id/20/220/320', description: '史铁生的生命独白，记录在地坛的所思所感，探讨生死与救赎，文字真挚动人，展现了对生命意义的深刻思考。' },
            { id: 3, name: '雪国', author: '川端康成', price: 42, rating: 4.5, category: '文学', stock: true,
              cover: 'https://picsum.photos/id/42/220/320', description: '川端康成诺贝尔文学奖作品，以唯美笔触描绘雪国的清冷，展现日式美学极致，被誉为日本文学的巅峰之作。' },
            // 科技类
            { id: 4, name: 'AI时代与人类未来', author: '李开复', price: 69, rating: 4.5, category: '科技', stock: false,
              cover: 'https://picsum.photos/id/18/220/320', description: '深度解析AI对人类社会的影响，预测科技与人文的融合方向，兼具专业与可读，为未来社会发展提供思考。' },
            { id: 5, name: 'Python编程从入门到实践', author: 'Eric Matthes', price: 89, rating: 5, category: '科技', stock: true,
              cover: 'https://picsum.photos/id/29/220/320', description: 'Python编程经典教材，适合零基础学习者，理论与实践相结合，案例丰富，涵盖Web开发、数据分析等热门领域。' },
            { id: 6, name: '算法图解', author: 'Aditya Bhargava', price: 49, rating: 4, category: '科技', stock: true,
              cover: 'https://picsum.photos/id/36/220/320', description: '以图解方式讲解算法，通俗易懂，适合算法初学者，涵盖常用数据结构和算法，配有丰富图示和练习。' },
            // 小说类
            { id: 7, name: '长安的荔枝', author: '马伯庸', price: 35, rating: 4.5, category: '小说', stock: true,
              cover: 'https://picsum.photos/id/44/220/320', description: '马伯庸历史短篇小说，以小人物视角展现大唐长安的繁华与危机，情节紧凑，历史细节丰富，读来酣畅淋漓。' },
            { id: 8, name: '三体', author: '刘慈欣', price: 68, rating: 5, category: '小说', stock: true,
              cover: 'https://picsum.photos/id/52/220/320', description: '中国科幻文学里程碑作品，讲述地球人类文明与三体文明的交锋，宏大的宇宙观和深刻的哲学思考。' },
            // 人文类
            { id: 9, name: '人类简史', author: '尤瓦尔·赫拉利', price: 55, rating: 4.8, category: '人文', stock: false,
              cover: 'https://picsum.photos/id/60/220/320', description: '从认知革命到科学革命，重新解读人类发展史，独特的视角和深刻的洞见，改变你对人类历史的认知。' },
            { id: 10, name: '万历十五年', author: '黄仁宇', price: 48, rating: 4.5, category: '人文', stock: true,
              cover: 'https://picsum.photos/id/68/220/320', description: '以万历十五年这一特殊年份为切入点，剖析明代社会结构，以小见大，展现历史发展的必然性与偶然性。' },
            // 艺术类
            { id: 11, name: '艺术的故事', author: 'E.H.贡布里希', price: 280, rating: 5, category: '艺术', stock: true,
              cover: 'https://picsum.photos/id/76/220/320', description: '西方艺术史的经典著作，图文并茂，涵盖从史前到现代的艺术发展，语言通俗易懂，适合艺术爱好者入门。' },
            { id: 12, name: '美的历程', author: '李泽厚', price: 58, rating: 4.7, category: '艺术', stock: true,
              cover: 'https://picsum.photos/id/84/220/320', description: '从远古图腾到明清文艺，梳理中国美学发展历程，文笔优美，见解独到，展现中国美学的独特魅力。' },
            // 生活类
            { id: 13, name: '断舍离', author: '山下英子', price: 38, rating: 4, category: '生活', stock: true,
              cover: 'https://picsum.photos/id/92/220/320', description: '通过整理物品了解自己，整理内心的混沌，让人生舒适的行动技术，实践简单生活的哲学。' },
            { id: 14, name: '非暴力沟通', author: '马歇尔·卢森堡', price: 42, rating: 4.6, category: '生活', stock: true,
              cover: 'https://picsum.photos/id/100/220/320', description: '一种沟通方式，依照它来谈话和聆听，能使人们情意相通，和谐相处，提升人际关系质量。' },
            { id: 15, name: '睡眠革命', author: '尼克·利特尔黑尔斯', price: 49, rating: 4.3, category: '生活', stock: true,
              cover: 'https://picsum.photos/id/108/220/320', description: '英超曼联御用睡眠教练的R90睡眠方案，重塑你的睡眠观念，科学改善睡眠质量，提升生活效率。' },
            // 新增图书
            { id: 16, name: '百年孤独', author: '加西亚·马尔克斯', price: 55, rating: 4.9, category: '文学', stock: true,
              cover: 'https://picsum.photos/id/116/220/320', description: '魔幻现实主义文学的代表作，讲述布恩迪亚家族七代人的传奇故事，展现拉丁美洲百年历史变迁。' },
            { id: 17, name: '活着', author: '余华', price: 36, rating: 4.8, category: '文学', stock: true,
              cover: 'https://picsum.photos/id/124/220/320', description: '讲述一个人和他的命运之间的友情，这是最为感人的友情，他们互相感激，同时也互相仇恨。' },
            { id: 18, name: '小王子', author: '安托万·德·圣埃克苏佩里', price: 28, rating: 4.7, category: '文学', stock: true,
              cover: 'https://picsum.photos/id/132/220/320', description: '写给成年人的童话，关于爱、责任和生命的真谛，简单而深刻，温暖而忧伤。' },
            { id: 19, name: '追风筝的人', author: '卡勒德·胡赛尼', price: 42, rating: 4.6, category: '小说', stock: true,
              cover: 'https://picsum.photos/id/140/220/320', description: '讲述阿富汗少爷阿米尔与仆人哈桑的友情故事，关于救赎与背叛，感人至深。' },
            { id: 20, name: '解忧杂货店', author: '东野圭吾', price: 39, rating: 4.5, category: '小说', stock: true,
              cover: 'https://picsum.photos/id/148/220/320', description: '现代人内心流失的东西，这家杂货店能帮你找回，奇妙温情的治愈系小说。' }
        ];

        // ==================== 用户对象构造函数 (迭代5) ====================
        function User(username, password, email = '', phone = '') {
            // 使用构造函数创建用户对象
            this.username = username;
            this.password = password;
            this.email = email;
            this.phone = phone;
            this.isLogin = false;
            this.cart = [];
            this.login = function() {
                this.isLogin = true;
                console.log(`${this.username} 登录成功`);
                return this;
            };
            this.logout = function() {
                this.isLogin = false;
                console.log(`${this.username} 退出登录`);
            };
            this.addToCart = function(bookId) {
                this.cart.push(bookId);
                console.log(`图书ID ${bookId} 已添加到购物车`);
            };
            this.getCartCount = function() {
                return this.cart.length;
            };
        }

        // ==================== 图书对象字面量 (迭代5) ====================
        const bookObjects = bookData.map(book => ({
            // 使用对象字面量创建图书对象
            id: book.id,
            name: book.name,
            author: book.author,
            price: book.price,
            rating: book.rating,
            category: book.category,
            stock: book.stock,
            cover: book.cover,
            description: book.description,
            getFormattedPrice: function() {
                return `¥${this.price.toFixed(2)}`;
            },
            getRatingStars: function() {
                const fullStars = Math.floor(this.rating);
                const hasHalfStar = this.rating % 1 >= 0.5;
                let stars = '★'.repeat(fullStars);
                if (hasHalfStar) stars += '☆';
                stars += '☆'.repeat(5 - fullStars - (hasHalfStar ? 1 : 0));
                return stars;
            },
            isAvailable: function() {
                return this.stock ? '有货' : '缺货';
            }
        }));

        // ==================== 初始化 ====================
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化所有功能
            initRealTimeClock();      // 迭代6: 实时时间显示
            initCountdownTimer();     // 迭代6: 限时抢购倒计时
            initPromoCountdown();     // 迭代6: 促销倒计时
            initBookData();           // 初始化图书数据
            initRecommendations();    // 迭代6: 随机推荐
            initSearchFunction();     // 迭代5: 智能搜索
            initLoginFunction();      // 迭代5: 登录功能
            initSortFilterFunctions(); // 迭代6: 排序筛选
            initCarousel();           // 轮播图
            initRingControls();       // 迭代4: 3D环形控制
            initStats();              // 统计数据
            initCartFunctions();      // 购物车功能
            
            console.log('页面初始化完成，共加载', bookData.length, '本图书');
        });

        // ==================== DOM元素获取方法 (迭代5) ====================
        // 1. getElementById
        const loginModal = document.getElementById('loginModal');
        const searchInput = document.getElementById('searchInput');
        
        // 2. querySelector
        const carouselWrapper = document.querySelector('.carousel-wrapper');
        const ring = document.querySelector('.ring');
        
        // 3. querySelectorAll
        const bookCards = document.querySelectorAll('.book-card-3d');
        const sortButtons = document.querySelectorAll('.sort-btn');
        
        // 4. getElementsByClassName
        const recommendationItems = document.getElementsByClassName('recommendation-item');
        const countdownValues = document.getElementsByClassName('countdown-value');

        // ==================== 实时时间显示功能 (迭代6) ====================
        function initRealTimeClock() {
            const currentDate = document.getElementById('currentDate');
            const currentTime = document.getElementById('currentTime');
            
            function updateTime() {
                const now = new Date();
                
                // 使用Date对象的各种方法 (迭代6要求至少3种)
                const year = now.getFullYear();
                const month = (now.getMonth() + 1).toString().padStart(2, '0');
                const date = now.getDate().toString().padStart(2, '0');
                const day = now.getDay();
                const weekDays = ['日', '一', '二', '三', '四', '五', '六'];
                const weekDay = weekDays[day];
                
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const seconds = now.getSeconds().toString().padStart(2, '0');
                
                // 更新日期显示
                currentDate.textContent = `${year}年${month}月${date}日 星期${weekDay}`;
                
                // 更新时间显示
                currentTime.textContent = `${hours}:${minutes}:${seconds}`;
            }
            
            // 立即执行一次
            updateTime();
            
            // 使用setInterval每秒更新一次 (迭代6)
            setInterval(updateTime, 1000);
        }

        // ==================== 限时抢购倒计时功能 (迭代6) ====================
        function initCountdownTimer() {
            const daysEl = document.getElementById('days');
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');
            
            // 设置活动结束时间为3天后的23:59:59
            const endTime = new Date();
            endTime.setDate(endTime.getDate() + 3);
            endTime.setHours(23, 59, 59, 999);
            
            function updateCountdown() {
                const now = new Date();
                const timeDiff = endTime - now;
                
                if (timeDiff <= 0) {
                    // 活动结束
                    daysEl.textContent = '00';
                    hoursEl.textContent = '00';
                    minutesEl.textContent = '00';
                    secondsEl.textContent = '00';
                    
                    // 使用setTimeout显示活动结束消息 (迭代6要求使用setTimeout)
                    setTimeout(() => {
                        showNotification('限时抢购活动已结束，敬请期待下次活动！', 'info');
                    }, 1000);
                    
                    // 停止倒计时
                    clearInterval(countdownInterval);
                    return;
                }
                
                // 计算剩余时间
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                
                // 更新显示
                daysEl.textContent = days.toString().padStart(2, '0');
                hoursEl.textContent = hours.toString().padStart(2, '0');
                minutesEl.textContent = minutes.toString().padStart(2, '0');
                secondsEl.textContent = seconds.toString().padStart(2, '0');
            }
            
            // 立即执行一次
            updateCountdown();
            
            // 使用setInterval每秒更新一次 (迭代6)
            const countdownInterval = setInterval(updateCountdown, 1000);
        }

        // ==================== 促销倒计时 (迭代6) ====================
        function initPromoCountdown() {
            const promoCountdown = document.getElementById('promoCountdown');
            
            function updatePromoCountdown() {
                const now = new Date();
                const hours = 23 - now.getHours();
                const minutes = 59 - now.getMinutes();
                const seconds = 59 - now.getSeconds();
                
                promoCountdown.textContent = 
                    `${hours.toString().padStart(2, '0')}:` +
                    `${minutes.toString().padStart(2, '0')}:` +
                    `${seconds.toString().padStart(2, '0')}`;
            }
            
            updatePromoCountdown();
            setInterval(updatePromoCountdown, 1000);
        }

        // ==================== 初始化图书数据 ====================
        function initBookData() {
            // 确保所有图书都有stock属性
            bookData.forEach(book => {
                if (book.stock === undefined) {
                    book.stock = Math.random() > 0.3; // 70%有货
                }
            });
        }

        // ==================== 随机图书推荐功能 (迭代6) ====================
        function initRecommendations() {
            const refreshBtn = document.getElementById('refreshRecommendations');
            const refreshCount = document.getElementById('refreshCount');
            const recommendationList = document.getElementById('recommendationList');
            
            let refreshCounter = 0;
            
            // 初始显示随机推荐
            displayRandomRecommendations();
            
            // 点击换一批按钮
            refreshBtn.addEventListener('click', function() {
                // 添加按钮点击动画
                this.classList.add('refreshing');
                setTimeout(() => {
                    this.classList.remove('refreshing');
                }, 500);
                
                refreshCounter++;
                refreshCount.textContent = refreshCounter;
                
                displayRandomRecommendations();
            });
        }

        function displayRandomRecommendations() {
            const recommendationList = document.getElementById('recommendationList');
            
            // 清空当前推荐
            recommendationList.innerHTML = '';
            
            // 使用数组的splice方法创建副本避免修改原数组 (迭代6)
            const shuffledBooks = [...bookData];
            
            // Fisher-Yates洗牌算法
            for (let i = shuffledBooks.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledBooks[i], shuffledBooks[j]] = [shuffledBooks[j], shuffledBooks[i]];
            }
            
            // 使用Math.random()选择5本不同的图书 (迭代6)
            const selectedBooks = [];
            const selectedIndices = new Set();
            
            while (selectedBooks.length < 5 && selectedBooks.length < shuffledBooks.length) {
                const randomIndex = Math.floor(Math.random() * shuffledBooks.length);
                
                if (!selectedIndices.has(randomIndex)) {
                    selectedIndices.add(randomIndex);
                    selectedBooks.push(shuffledBooks[randomIndex]);
                }
            }
            
            // 使用数组的join方法处理描述文本 (迭代6)
            selectedBooks.forEach((book, index) => {
                const bookElement = document.createElement('div');
                bookElement.className = 'recommendation-item';
                bookElement.setAttribute('data-id', book.id);
                bookElement.innerHTML = `
                    <div class="recommendation-img">
                        <img src="${book.cover}" alt="${book.name}" loading="lazy">
                        <div class="recommendation-badge">${index + 1}</div>
                    </div>
                    <div class="recommendation-info">
                        <h4>${book.name}</h4>
                        <p class="recommendation-author">${book.author}</p>
                        <p class="recommendation-desc">${book.description.split('，')[0]}...</p>
                        <div class="recommendation-meta">
                            <span class="price">¥${book.price.toFixed(2)}</span>
                            <span class="category">${book.category}</span>
                        </div>
                        <div class="recommendation-rating">
                            ${'★'.repeat(Math.floor(book.rating))}${'☆'.repeat(5-Math.floor(book.rating))}
                            <span class="rating-text">${book.rating.toFixed(1)}</span>
                        </div>
                        <div class="stock-badge ${book.stock ? 'in-stock' : 'out-of-stock'}">
                            <i class="fas ${book.stock ? 'fa-check-circle' : 'fa-clock'}"></i>
                            ${book.stock ? '有货' : '缺货'}
                        </div>
                        <div class="recommendation-actions">
                            <button class="btn-small add-to-cart" data-id="${book.id}">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                            <button class="btn-small view-details" data-id="${book.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                // 点击事件
                bookElement.addEventListener('click', function(e) {
                    if (!e.target.closest('.recommendation-actions')) {
                        showBookDetail(book);
                    }
                });
                
                // 添加到购物车按钮
                const addToCartBtn = bookElement.querySelector('.add-to-cart');
                addToCartBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    addToCart(book.id);
                });
                
                // 查看详情按钮
                const viewDetailsBtn = bookElement.querySelector('.view-details');
                viewDetailsBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showBookDetail(book);
                });
                
                recommendationList.appendChild(bookElement);
            });
        }

        // ==================== 智能搜索功能 (迭代5) ====================
        function initSearchFunction() {
            const searchInput = document.getElementById('searchInput');
            const searchResult = document.getElementById('searchResult');
            
            searchInput.addEventListener('input', function() {
                const keyword = this.value.trim().toLowerCase();
                searchResult.innerHTML = '';
                
                if (!keyword) {
                    searchResult.style.display = 'none';
                    return;
                }
                
                // 使用数组的filter方法筛选匹配的图书 (迭代6)
                const matchBooks = bookData.filter(book => 
                    book.name.toLowerCase().includes(keyword) || 
                    book.author.toLowerCase().includes(keyword) || 
                    book.category.toLowerCase().includes(keyword) ||
                    book.description.toLowerCase().includes(keyword)
                );
                
                if (matchBooks.length === 0) {
                    searchResult.innerHTML = '<div class="search-result-item no-results">暂无匹配图书</div>';
                    searchResult.style.display = 'block';
                    return;
                }
                
                // 限制显示结果数量
                const displayBooks = matchBooks.slice(0, 8);
                
                displayBooks.forEach(book => {
                    const item = document.createElement('div');
                    item.className = 'search-result-item';
                    item.innerHTML = `
                        <div class="search-result-img">
                            <img src="${book.cover}" alt="${book.name}">
                        </div>
                        <div class="search-result-info">
                            <strong>${book.name}</strong>
                            <p class="search-result-author">${book.author}</p>
                            <div class="search-result-meta">
                                <span class="search-result-category">${book.category}</span>
                                <span class="search-result-price">¥${book.price.toFixed(2)}</span>
                            </div>
                        </div>
                    `;
                    item.addEventListener('click', () => {
                        searchInput.value = book.name;
                        searchResult.style.display = 'none';
                        showBookDetail(book);
                    });
                    searchResult.appendChild(item);
                });
                
                searchResult.style.display = 'block';
            });
            
            // 点击空白处关闭搜索结果
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !searchResult.contains(e.target)) {
                    searchResult.style.display = 'none';
                }
            });
        }

        // ==================== 登录功能 (迭代5) ====================
        function initLoginFunction() {
            const showLoginBtn = document.getElementById('showLogin');
            const loginModal = document.getElementById('loginModal');
            const closeModalBtn = document.getElementById('closeModal');
            
            // 正则表达式 (迭代5)
            const regEmail = /^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            const regPhone = /^1[3-9]\d{9}$/;
            const regPwd = /^.{6,16}$/;
            
            const username = document.getElementById('username');
            const usernameTip = document.getElementById('usernameTip');
            const password = document.getElementById('password');
            const passwordTip = document.getElementById('passwordTip');
            const strength1 = document.getElementById('strength1');
            const strength2 = document.getElementById('strength2');
            const strength3 = document.getElementById('strength3');
            const loginBtn = document.getElementById('loginBtn');
            
            let currentUser = null;
            
            // 打开登录模态框
            showLoginBtn.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            });
            
            // 关闭登录模态框
            closeModalBtn.addEventListener('click', function() {
                loginModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            // 点击模态框外部关闭
            window.addEventListener('click', function(e) {
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // 验证用户名
            function checkUsername() {
                const val = username.value.trim();
                if (!val) {
                    usernameTip.textContent = '请输入邮箱或手机号';
                    usernameTip.className = 'tip-text tip-error';
                    username.className = 'input-error';
                    return false;
                } else if (regEmail.test(val) || regPhone.test(val)) {
                    usernameTip.textContent = '格式正确';
                    usernameTip.className = 'tip-text tip-success';
                    username.className = 'input-success';
                    return true;
                } else {
                    usernameTip.textContent = '邮箱或手机号格式错误';
                    usernameTip.className = 'tip-text tip-error';
                    username.className = 'input-error';
                    return false;
                }
            }
            
            // 验证密码强度
            function checkPassword() {
                const val = password.value;
                // 重置强度条
                [strength1, strength2, strength3].forEach(bar => {
                    bar.className = 'strength-bar';
                });
                
                if (!val) {
                    passwordTip.textContent = '请输入密码';
                    passwordTip.className = 'tip-text tip-error';
                    password.className = 'input-error';
                    return false;
                } else if (!regPwd.test(val)) {
                    passwordTip.textContent = '密码长度需6-16位';
                    passwordTip.className = 'tip-text tip-error';
                    password.className = 'input-error';
                    return false;
                }
                
                // 计算密码强度
                let strength = 0;
                if (/[a-z]/.test(val)) strength++;
                if (/[A-Z]/.test(val)) strength++;
                if (/[0-9]/.test(val)) strength++;
                if (/[^a-zA-Z0-9]/.test(val)) strength++;
                
                if (strength <= 2) {
                    passwordTip.textContent = '密码强度：弱';
                    passwordTip.className = 'tip-text tip-error';
                    strength1.classList.add('strength-weak');
                } else if (strength === 3) {
                    passwordTip.textContent = '密码强度：中';
                    passwordTip.className = 'tip-text tip-warning';
                    [strength1, strength2].forEach(bar => bar.classList.add('strength-middle'));
                } else {
                    passwordTip.textContent = '密码强度：强';
                    passwordTip.className = 'tip-text tip-success';
                    [strength1, strength2, strength3].forEach(bar => bar.classList.add('strength-strong'));
                }
                password.className = 'input-success';
                return true;
            }
            
            // 绑定验证事件
            username.addEventListener('blur', checkUsername);
            password.addEventListener('input', checkPassword);
            
            // 登录按钮点击
            loginBtn.addEventListener('click', () => {
                const isUserOk = checkUsername();
                const isPwdOk = checkPassword();
                
                if (isUserOk && isPwdOk) {
                    // 使用构造函数创建用户对象 (迭代5)
                    currentUser = new User(username.value, password.value);
                    currentUser.login();
                    
                    // 使用对象字面量记录登录信息
                    const loginInfo = {
                        username: username.value,
                        loginTime: new Date().toLocaleString(),
                        remember: document.getElementById('remember').checked
                    };
                    
                    // 保存到localStorage
                    if (loginInfo.remember) {
                        localStorage.setItem('loginInfo', JSON.stringify(loginInfo));
                    }
                    
                    // 显示登录成功消息
                    showNotification(`登录成功！欢迎回来，${username.value.split('@')[0]}`, 'success');
                    
                    // 关闭模态框
                    loginModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // 更新导航栏显示
                    showLoginBtn.innerHTML = `
                        <i class="fas fa-user-circle"></i> ${username.value.split('@')[0]}
                        <span class="user-badge">VIP</span>
                    `;
                    showLoginBtn.classList.add('logged-in');
                    
                    // 更新页面欢迎消息
                    updateWelcomeMessage(username.value);
                } else {
                    showNotification('请完善登录信息！', 'error');
                }
            });
        }

        // ==================== 排序和筛选功能 (迭代6) ====================
        function initSortFilterFunctions() {
            const sortButtons = document.querySelectorAll('.sort-btn');
            const inStockOnlyCheckbox = document.getElementById('inStockOnly');
            const bookTableBody = document.getElementById('bookTableBody');
            
            // 排序按钮点击事件
            sortButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sortType = this.dataset.sort;
                    sortBooks(sortType);
                    
                    // 高亮当前排序按钮
                    sortButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // 只看有货复选框事件
            inStockOnlyCheckbox.addEventListener('change', function() {
                filterBooks(this.checked);
            });
            
            // 排序函数
            function sortBooks(sortType) {
                let sortedBooks = [...bookData];
                
                switch(sortType) {
                    case 'price-asc':
                        // 使用数组的sort方法按价格升序排序 (迭代6)
                        sortedBooks.sort((a, b) => a.price - b.price);
                        showNotification('已按价格升序排序', 'info');
                        break;
                    case 'price-desc':
                        // 使用数组的sort方法按价格降序排序 (迭代6)
                        sortedBooks.sort((a, b) => b.price - a.price);
                        showNotification('已按价格降序排序', 'info');
                        break;
                    case 'rating':
                        // 使用数组的sort方法按评分排序 (迭代6)
                        sortedBooks.sort((a, b) => b.rating - a.rating);
                        showNotification('已按评分排序', 'info');
                        break;
                }
                
                // 显示排序后的图书
                displaySortedBooks(sortedBooks.slice(0, 8));
            }
            
            // 筛选函数
            function filterBooks(onlyInStock) {
                if (!onlyInStock) {
                    // 重置显示所有图书
                    displaySortedBooks(bookData.slice(0, 8));
                    showNotification('显示所有图书', 'info');
                    return;
                }
                
                // 使用数组的filter方法筛选有货图书 (迭代6)
                const inStockBooks = bookData.filter(book => book.stock);
                
                // 显示筛选后的图书
                displaySortedBooks(inStockBooks.slice(0, 8));
                showNotification(`已筛选出 ${inStockBooks.length} 本有货图书`, 'success');
            }
            
            // 显示排序/筛选后的图书
            function displaySortedBooks(books) {
                // 更新推荐列表
                const recommendationList = document.getElementById('recommendationList');
                recommendationList.innerHTML = '';
                
                books.forEach((book, index) => {
                    const bookElement = document.createElement('div');
                    bookElement.className = 'recommendation-item';
                    bookElement.innerHTML = `
                        <div class="recommendation-img">
                            <img src="${book.cover}" alt="${book.name}">
                            <div class="recommendation-badge">${index + 1}</div>
                        </div>
                        <div class="recommendation-info">
                            <h4>${book.name}</h4>
                            <p class="recommendation-author">${book.author}</p>
                            <div class="recommendation-meta">
                                <span class="price">¥${book.price.toFixed(2)}</span>
                                <span class="rating">${'★'.repeat(Math.floor(book.rating))}${'☆'.repeat(5-Math.floor(book.rating))}</span>
                            </div>
                            <div class="stock-badge ${book.stock ? 'in-stock' : 'out-of-stock'}">
                                ${book.stock ? '有货' : '缺货'}
                            </div>
                        </div>
                    `;
                    
                    bookElement.addEventListener('click', function() {
                        showBookDetail(book);
                    });
                    
                    recommendationList.appendChild(bookElement);
                });
            }
        }

        // ==================== 轮播图功能 ====================
        function initCarousel() {
            const carouselItems = document.querySelectorAll('.carousel-item');
            const dots = document.querySelectorAll('.dot');
            let currentIndex = 0;
            
            function showSlide(index) {
                carouselItems.forEach((item, i) => {
                    item.style.transform = `translateX(-${index * 100}%)`;
                    dots[i].classList.remove('active');
                });
                dots[index].classList.add('active');
            }
            
            // 自动轮播
            setInterval(() => {
                currentIndex = (currentIndex + 1) % carouselItems.length;
                showSlide(currentIndex);
            }, 5000);
            
            // 点击指示点切换
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    currentIndex = index;
                    showSlide(currentIndex);
                });
            });
            
            // 鼠标悬停暂停
            const carousel = document.querySelector('.carousel');
            let carouselInterval;
            
            carousel.addEventListener('mouseenter', () => {
                clearInterval(carouselInterval);
            });
            
            carousel.addEventListener('mouseleave', () => {
                carouselInterval = setInterval(() => {
                    currentIndex = (currentIndex + 1) % carouselItems.length;
                    showSlide(currentIndex);
                }, 5000);
            });
        }

        // ==================== 3D环形控制 (迭代4) ====================
        function initRingControls() {
            const ring = document.querySelector('.ring');
            const ringPause = document.getElementById('ringPause');
            const ringResume = document.getElementById('ringResume');
            const ringReverse = document.getElementById('ringReverse');
            
            let isPaused = false;
            let isReversed = false;
            let rotation = 0;
            
            function animateRing() {
                if (!isPaused) {
                    rotation += isReversed ? -0.5 : 0.5;
                    ring.style.transform = `rotateY(${rotation}deg)`;
                }
                requestAnimationFrame(animateRing);
            }
            
            animateRing();
            
            ringPause.addEventListener('click', () => {
                isPaused = true;
                ringPause.disabled = true;
                ringResume.disabled = false;
                showNotification('3D环形展示已暂停', 'info');
            });
            
            ringResume.addEventListener('click', () => {
                isPaused = false;
                ringPause.disabled = false;
                ringResume.disabled = true;
                showNotification('3D环形展示已继续', 'success');
            });
            
            ringReverse.addEventListener('click', () => {
                isReversed = !isReversed;
                ringReverse.innerHTML = isReversed ? 
                    '<i class="fas fa-retweet"></i> 正向' : 
                    '<i class="fas fa-retweet"></i> 反向';
                showNotification(`3D环形展示方向已切换为${isReversed ? '反向' : '正向'}`, 'info');
            });
            
            // 鼠标控制
            ring.addEventListener('mouseenter', () => {
                isPaused = true;
            });
            
            ring.addEventListener('mouseleave', () => {
                isPaused = false;
            });
        }

        // ==================== 统计数据 ====================
        function initStats() {
            // 模拟统计数据
            const bookCount = document.getElementById('bookCount');
            const userCount = document.getElementById('userCount');
            const publisherCount = document.getElementById('publisherCount');
            const todayVisits = document.getElementById('todayVisits');
            const onlineUsers = document.getElementById('onlineUsers');
            
            // 动画效果更新数字
            function animateNumber(element, target, duration = 2000) {
                const start = parseInt(element.textContent.replace(/,/g, ''));
                const increment = (target - start) / (duration / 16);
                let current = start;
                
                const timer = setInterval(() => {
                    current += increment;
                    if ((increment > 0 && current >= target) || (increment < 0 && current <= target)) {
                        current = target;
                        clearInterval(timer);
                    }
                    element.textContent = Math.floor(current).toLocaleString() + '+';
                }, 16);
            }
            
            // 初始值
            animateNumber(bookCount, 10000);
            animateNumber(userCount, 50000);
            animateNumber(publisherCount, 500);
            animateNumber(todayVisits, 1234);
            animateNumber(onlineUsers, 56);
            
            // 在线用户数随机变化
            setInterval(() => {
                const current = parseInt(onlineUsers.textContent);
                const change = Math.floor(Math.random() * 5) - 2; // -2到+2
                const newValue = Math.max(40, Math.min(100, current + change));
                onlineUsers.textContent = newValue;
            }, 10000);
        }

        // ==================== 购物车功能 ====================
        function initCartFunctions() {
            // 添加到购物车按钮事件
            document.addEventListener('click', function(e) {
                if (e.target.closest('.add-to-cart') || e.target.closest('.btn-add-cart') || e.target.closest('.table-btn.add-cart')) {
                    const button = e.target.closest('button');
                    const bookId = button.dataset.id;
                    addToCart(bookId);
                }
            });
            
            // 立即购买按钮事件
            document.addEventListener('click', function(e) {
                if (e.target.closest('.btn-buy-now')) {
                    const card = e.target.closest('.book-card-3d');
                    const bookId = card.querySelector('.btn-buy-now').dataset.id;
                    buyNow(bookId);
                }
            });
        }

        // ==================== 辅助函数 ====================
        function addToCart(bookId) {
            const book = bookData.find(b => b.id == bookId);
            if (!book) return;
            
            if (!book.stock) {
                showNotification('该图书暂时缺货，无法加入购物车', 'warning');
                return;
            }
            
            // 这里可以添加实际的购物车逻辑
            showNotification(`《${book.name}》已加入购物车`, 'success');
            
            // 添加动画效果
            const button = document.querySelector(`[data-id="${bookId}"]`);
            if (button) {
                button.classList.add('added');
                setTimeout(() => button.classList.remove('added'), 1000);
            }
        }
        
        function buyNow(bookId) {
            const book = bookData.find(b => b.id == bookId);
            if (!book) return;
            
            if (!book.stock) {
                showNotification('该图书暂时缺货，无法购买', 'warning');
                return;
            }
            
            showNotification(`正在跳转到《${book.name}》的购买页面...`, 'info');
            // 这里可以添加实际的购买跳转逻辑
        }
        
        function showBookDetail(book) {
            const detailHtml = `
                <div class="book-detail-modal">
                    <div class="detail-header">
                        <h3>《${book.name}》</h3>
                        <button class="close-detail">&times;</button>
                    </div>
                    <div class="detail-content">
                        <div class="detail-cover">
                            <img src="${book.cover}" alt="${book.name}">
                        </div>
                        <div class="detail-info">
                            <h4>${book.name}</h4>
                            <p class="detail-author">作者：${book.author}</p>
                            <p class="detail-category">分类：${book.category}</p>
                            <div class="detail-price">
                                <span class="price">¥${book.price.toFixed(2)}</span>
                                <span class="discount">8折</span>
                            </div>
                            <div class="detail-rating">
                                ${'★'.repeat(Math.floor(book.rating))}${'☆'.repeat(5-Math.floor(book.rating))}
                                <span class="rating-text">${book.rating.toFixed(1)}分</span>
                            </div>
                            <div class="detail-stock ${book.stock ? 'in-stock' : 'out-of-stock'}">
                                <i class="fas ${book.stock ? 'fa-check-circle' : 'fa-clock'}"></i>
                                ${book.stock ? '有货，可立即发货' : '暂时缺货，可预订'}
                            </div>
                            <p class="detail-description">${book.description}</p>
                            <div class="detail-actions">
                                <button class="btn-add-cart" data-id="${book.id}">
                                    <i class="fas fa-shopping-cart"></i> 加入购物车
                                </button>
                                <button class="btn-buy-now" data-id="${book.id}">
                                    <i class="fas fa-bolt"></i> 立即购买
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            const detailModal = document.createElement('div');
            detailModal.className = 'modal book-detail-modal-container';
            detailModal.innerHTML = detailHtml;
            document.body.appendChild(detailModal);
            document.body.style.overflow = 'hidden';
            
            // 关闭按钮
            detailModal.querySelector('.close-detail').addEventListener('click', () => {
                document.body.removeChild(detailModal);
                document.body.style.overflow = 'auto';
            });
            
            // 点击外部关闭
            detailModal.addEventListener('click', (e) => {
                if (e.target === detailModal) {
                    document.body.removeChild(detailModal);
                    document.body.style.overflow = 'auto';
                }
            });
            
            // 添加到购物车按钮
            detailModal.querySelector('.btn-add-cart').addEventListener('click', () => {
                addToCart(book.id);
            });
            
            // 立即购买按钮
            detailModal.querySelector('.btn-buy-now').addEventListener('click', () => {
                buyNow(book.id);
            });
        }
        
        function showNotification(message, type = 'info') {
            // 移除已有的通知
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // 显示通知
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // 3秒后隐藏
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 3000);
        }
        
        function updateWelcomeMessage(username) {
            const welcomeMessage = document.createElement('div');
            welcomeMessage.className = 'welcome-message';
            welcomeMessage.innerHTML = `
                <div class="welcome-content">
                    <i class="fas fa-smile"></i>
                    <div class="welcome-text">
                        <strong>欢迎回来，${username.split('@')[0]}！</strong>
                        <p>专属优惠已为您准备好</p>
                    </div>
                    <button class="close-welcome">&times;</button>
                </div>
            `;
            
            document.body.appendChild(welcomeMessage);
            
            // 关闭按钮
            welcomeMessage.querySelector('.close-welcome').addEventListener('click', () => {
                welcomeMessage.remove();
            });
            
            // 5秒后自动关闭
            setTimeout(() => {
                if (welcomeMessage.parentNode) {
                    welcomeMessage.remove();
                }
            }, 5000);
        }
        
        // 键盘快捷键
        document.addEventListener('keydown', function(e) {
            // Ctrl+K 聚焦搜索框
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            // ESC 关闭所有模态框
            if (e.key === 'Escape') {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (modal.style.display === 'block') {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            }
        });
    </script>
</body>
</html>